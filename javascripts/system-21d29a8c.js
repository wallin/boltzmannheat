(function(){angular.module("bm.system",["bm.distribution"]).service("System",["$rootScope","Distribution",function(t,e){var n,s;return s={},n=function(){function n(){this.params={numParticles:1,eLevelType:this.options.eLevelTypes[0],eDist:10,numSubLevels:5,subEDist:10,temperature:103},this.update()}return n.prototype.options={eLevelTypes:[{name:"Equidistant",value:"equidistant"},{name:"Sublevels",value:"sublevels"},{name:"Rotational",value:"rotational"}]},n.prototype.update=function(){return this.result=e.boltzmann(this.params),t.$broadcast("system.update")},n}(),{findOrCreate:function(t){return null==s[t]&&(s[t]=new n(t)),s[t]},all:s}}]).controller("SystemCtrl",["$attrs","$scope","System",function(t,e,n){return e.system=n.findOrCreate(t.systemName),e.plotOptions={relative:!1,eLevels:!0,xmax:1,ymax:200},e.$watch("system.params",function(){return e.system.update()},!0)}]).controller("HeatFlowCtrl",["$scope","System",function(t,e){var n;return n=function(){var n,s,r,a;t.total=0,r=e.all,a=[];for(n in r)s=r[n],a.push(t.total+=s.result.entropyTotal);return a},t.$on("system.update",n)}])}).call(this);