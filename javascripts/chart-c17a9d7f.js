(function(){angular.module("ui.flot",["bm.colour"]).directive("chart",["Colour",function(t){return{restrict:"C",link:function(a,e,r){var i;return i=function(i){var n,l,o,c,u,s,h,f,v,p,b,m;if(i)return s=a.$eval(r.chartOptions),p=a.$eval(r.chartData),v=a.$eval(r.chartParams),n=function(){switch(v.eLevelType.value){case"equidistant":return p.energyLevelMainDiff/2;case"sublevel":return p.energyLevelSubDiff/2}}(),m=10,b=0,u={series:{bars:{show:!0,fill:.7,fillColor:"#"+t.colorAt(p.temperature)}},grid:{hoverable:!0,show:!0},yaxis:{min:0,max:s.ymax,ticks:m,tickLength:b},xaxis:{min:0,max:s.xmax,tickLength:0},bars:{horizontal:!0,barWidth:n,lineWidth:1},tooltip:!0,tooltipOpts:{content:"population at E-level %y.0 is %x.2",shifts:{x:-60,y:25}}},h=function(){var t,a;if(s.relative){for(f=angular.copy(p.probability),c=f[0][0],o=t=0,a=f.length;a>t;o=++t)l=f[o],l[0]>0&&(l[0]/=c);return f}return p.probability}(),$.plot(e,[{data:h}],u)},a.$watch(r.chartData,i),a.$watch(r.chartOptions,i,!0),e.show()}}}])}).call(this);